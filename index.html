<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>구매팀 · 도구 모음</title>
  <style>
    :root{
      --bg:#0f172a; --panel:#111827; --ink:#e5e7eb; --muted:#9ca3af; --brand:#60a5fa;
    }
    *{box-sizing:border-box}
    body{margin:0; background:var(--bg); color:var(--ink);
      font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Noto Sans,Ubuntu,Cantarell,Helvetica Neue,Arial}
    .layout{display:grid; grid-template-columns: 260px 1fr; min-height:100vh}
    .sidebar{
      background:var(--panel);
      border-right:1px solid rgba(255,255,255,.06);
      padding:18px 14px;
    }
    h1{margin:0 0 12px; font-size:18px; font-weight:800}
    .sub{color:var(--muted); font-size:12px; margin-bottom:14px}
    .search{width:100%; padding:10px 12px; border-radius:10px;
      border:1px solid rgba(255,255,255,.08); background:#0b1220; color:var(--ink); margin-bottom:12px}
    .nav{display:flex; flex-direction:column; gap:8px; margin-top:8px}
    .nav a{
      text-decoration:none; color:var(--ink); font-size:14px; padding:10px 10px; border-radius:10px;
      border:1px solid transparent; display:flex; justify-content:space-between; align-items:center;
    }
    .nav a:hover{background:#0b1220; border-color:rgba(255,255,255,.08)}
    .nav a.active{border-color:#ffffff33; background:#0b1220}
    .tag{font-size:11px; color:var(--muted)}
    .main{position:relative}
    .viewer{
      position:absolute; inset:0; border:0; width:100%; height:100%;
      background:#0b1220;
    }
    .topbar{
      position:sticky; top:0; z-index:1; background:linear-gradient(0deg, rgba(15,23,42,0), rgba(15,23,42,.75));
      padding:10px 14px; font-size:12px; color:var(--muted)
    }
    @media (max-width: 900px){
      .layout{grid-template-columns:1fr}
      .sidebar{position:sticky; top:0; z-index:2}
    }
  </style>
</head>
<body>
  <div class="layout">
    <aside class="sidebar">
      <h1>구매팀 · 도구</h1>
      <div class="sub">왼쪽에서 카테고리를 선택하면 오른쪽에 열립니다.</div>
      <input id="q" class="search" placeholder="검색 (제목/태그)" />
      <nav id="nav" class="nav"></nav>
    </aside>

    <main class="main">
      <div class="topbar"><span id="crumb"></span></div>
      <iframe id="viewer" class="viewer" src=""></iframe>
    </main>
  </div>

  <script>
    // ① 여기에 페이지 목록만 추가/수정하면 사이드바 자동 반영
    //    path는 저장한 파일명으로 맞춰주세요.
    const pages = [
      { title: "정규분포 시각화 · 표준편차 구간", path: "sw-normal-dist.html", tags: ["통계","정규분포","표준편차"] },
      // 예시) { title:"박스플롯 요약", path:"boxplot.html", tags:["박스플롯","사분위수"] },
      // 예시) { title:"단가 분포 히스토그램", path:"unit-hist.html", tags:["히스토그램","시뮬"] },
    ];

    const navEl = document.getElementById('nav');
    const viewer = document.getElementById('viewer');
    const crumb = document.getElementById('crumb');
    const search = document.getElementById('q');

    function renderNav(filter=""){
      navEl.innerHTML = "";
      const kw = filter.trim().toLowerCase();
      const list = pages.filter(p => {
        if(!kw) return true;
        const hay = (p.title+" "+(p.tags||[]).join(" ")).toLowerCase();
        return hay.includes(kw);
      });
      list.forEach((p, idx) => {
        const a = document.createElement('a');
        a.href = "#"+encodeURIComponent(p.path);
        a.dataset.path = p.path;
        a.innerHTML = `<span>${p.title}</span>${p.tags?.length? `<span class="tag">${p.tags.join(", ")}</span>`: ""}`;
        a.addEventListener('click', (e) => {
          e.preventDefault();
          openPage(p.path, p.title);
          setActive(p.path);
          history.replaceState(null, "", a.href);
        });
        navEl.appendChild(a);
      });
      // 활성 표시 유지
      const hashPath = decodeURIComponent(location.hash.slice(1)||"");
      setActive(hashPath || (list[0]?.path||""));
    }

    function setActive(path){
      [...navEl.querySelectorAll('a')].forEach(a => {
        a.classList.toggle('active', a.dataset.path === path);
      });
    }

    function openPage(path, title){
      viewer.src = path;
      crumb.textContent = title ? `열람 중: ${title} (${path})` : path;
    }

    // 해시로 딥링크(직접 주소 접근) 지원
    window.addEventListener('hashchange', () => {
      const path = decodeURIComponent(location.hash.slice(1)||"");
      const meta = pages.find(p=>p.path===path) || pages[0];
      openPage(meta.path, meta.title);
      setActive(meta.path);
    });

    // 검색
    search.addEventListener('input', () => renderNav(search.value));

    // 초기 렌더
    renderNav();
    (function initial(){
      const path = decodeURIComponent(location.hash.slice(1)||"") || pages[0].path;
      const meta = pages.find(p=>p.path===path) || pages[0];
      openPage(meta.path, meta.title);
      setActive(meta.path);
      if(!location.hash) history.replaceState(null, "", "#"+encodeURIComponent(meta.path));
    })();
  </script>
</body>
</html>
